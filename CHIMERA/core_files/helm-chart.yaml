# --- CUSTOMIZATION POINT: Update Helm chart metadata ---
# Modify name, version, or dependencies as needed
apiVersion: v2
name: chimera-2048
description: Helm chart for CHIMERA 2048 API Gateway with NVIDIA CUDA Cores
version: 0.2.0
dependencies:
  - name: nvidia-gpu-operator
    version: "23.9.0"
    repository: "https://nvidia.github.io/gpu-operator"
type: application
appVersion: "1.1.0"

# --- CUSTOMIZATION POINT: Configure namespace and installation ---
install:
  namespace: chimera-2048
  createNamespace: true

# --- CUSTOMIZATION POINT: Adjust resource limits and requests ---
# Modify CPU, memory, or GPU requirements based on your hardware
resources:
  limits:
    nvidia.com/gpu: 4
  requests:
    cpu: "12"
    memory: "64Gi"
    nvidia.com/gpu: 4

# --- CUSTOMIZATION POINT: Configure autoscaling parameters ---
# Adjust replicas, CPU/GPU utilization targets
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 12
  targetCPUUtilizationPercentage: 75
  targetGPUUtilizationPercentage: 90

# --- CUSTOMIZATION POINT: Configure service ports ---
# Add or modify ports for additional services
service:
  type: ClusterIP
  ports:
    - name: api
      port: 8000
      targetPort: 8000
    - name: metrics
      port: 9090
      targetPort: 9090
    - name: websocket
      port: 8080
      targetPort: 8080

# --- CUSTOMIZATION POINT: Set environment variables ---
# Update database URI, CUDA settings, or add custom variables
env:
  - name: NVIDIA_DRIVER_CAPABILITIES
    value: "compute,utility,video"
  - name: CUDA_VISIBLE_DEVICES
    value: "0,1,2,3"
  - name: SQLALCHEMY_DATABASE_URI
    value: "postgresql://user:pass@localhost:5432/chimera_hub"
  - name: PROMETHEUS_MULTIPROC_DIR
    value: "/var/lib/prometheus"
  - name: NVIDIA_CUDA_CORES
    value: "enabled"
  - name: QUANTUM_LOGIC
    value: "enabled"

# --- CUSTOMIZATION POINT: Configure node affinity ---
# Adjust for specific GPU types or other node requirements
nodeSelector:
  nvidia.com/gpu: "true"

# --- CUSTOMIZATION POINT: Add tolerations for specific environments ---
tolerations:
  - key: "nvidia.com/gpu"
    operator: "Exists"
    effect: "NoSchedule"